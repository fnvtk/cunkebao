<view class="page"><uni-nav-bar vue-id="133a9744-1" shadow="{{true}}" fixed="{{true}}" left-icon="left" statusBar="{{true}}" title="{{formData.Name||'任务配置'}}" data-event-opts="{{[['^clickLeft',[['back']]]]}}" bind:clickLeft="__e" bind:__l="__l"></uni-nav-bar><view class="forms"><uni-forms class="vue-ref" vue-id="133a9744-2" modelValue="{{formData}}" rules="{{rules}}" label-position="top" label-width="200px" data-ref="form" bind:__l="__l" vue-slots="{{['default']}}"><input data-event-opts="{{[['input',[['__set_model',['$0','Id','$event',[]],['formData']]]]]}}" style="display:none;" value="{{formData.Id}}" bindinput="__e"/><uni-forms-item vue-id="{{('133a9744-3')+','+('133a9744-2')}}" label="名称" name="Name" required="{{true}}" bind:__l="__l" vue-slots="{{['default']}}"><uni-easyinput bind:input="__e" vue-id="{{('133a9744-4')+','+('133a9744-3')}}" type="text" placeholder="请输入名称" value="{{formData.Name}}" data-event-opts="{{[['^input',[['__set_model',['$0','Name','$event',[]],['formData']]]]]}}" bind:__l="__l"></uni-easyinput></uni-forms-item><uni-forms-item vue-id="{{('133a9744-5')+','+('133a9744-2')}}" label="主题" name="Topic" required="{{true}}" bind:__l="__l" vue-slots="{{['default']}}"><uni-easyinput bind:input="__e" vue-id="{{('133a9744-6')+','+('133a9744-5')}}" type="text" placeholder="请输入主题" value="{{formData.Topic}}" data-event-opts="{{[['^input',[['__set_model',['$0','Topic','$event',[]],['formData']]]]]}}" bind:__l="__l"></uni-easyinput></uni-forms-item><uni-forms-item vue-id="{{('133a9744-7')+','+('133a9744-2')}}" label="招呼语" name="Hello" required="{{true}}" bind:__l="__l" vue-slots="{{['default']}}"><uni-easyinput bind:input="__e" vue-id="{{('133a9744-8')+','+('133a9744-7')}}" type="textarea" placeholder="请输入招呼语" value="{{formData.Hello}}" data-event-opts="{{[['^input',[['__set_model',['$0','Hello','$event',[]],['formData']]]]]}}" bind:__l="__l"></uni-easyinput></uni-forms-item><uni-forms-item vue-id="{{('133a9744-9')+','+('133a9744-2')}}" label="添加好友间隔" name="MinFriendRequestInterval" required="{{true}}" bind:__l="__l" vue-slots="{{['default']}}"><uni-easyinput bind:input="__e" vue-id="{{('133a9744-10')+','+('133a9744-9')}}" type="number" placeholder="请输入添加好友间隔" value="{{formData.MinFriendRequestInterval}}" data-event-opts="{{[['^input',[['__set_model',['$0','MinFriendRequestInterval','$event',[]],['formData']]]]]}}" bind:__l="__l"></uni-easyinput></uni-forms-item><uni-forms-item vue-id="{{('133a9744-11')+','+('133a9744-2')}}" label="每日最大添加好友数" name="MaxPerDayFriendRequestCount" required="{{true}}" bind:__l="__l" vue-slots="{{['default']}}"><uni-easyinput bind:input="__e" vue-id="{{('133a9744-12')+','+('133a9744-11')}}" type="number" placeholder="请输入每日最大添加好友数" value="{{formData.MaxPerDayFriendRequestCount}}" data-event-opts="{{[['^input',[['__set_model',['$0','MaxPerDayFriendRequestCount','$event',[]],['formData']]]]]}}" bind:__l="__l"></uni-easyinput></uni-forms-item><uni-forms-item vue-id="{{('133a9744-13')+','+('133a9744-2')}}" label="持续执行" name="Always" required="{{true}}" bind:__l="__l" vue-slots="{{['default']}}"><uni-section vue-id="{{('133a9744-14')+','+('133a9744-13')}}" type="line" bind:__l="__l" vue-slots="{{['default']}}"><view class="uni-px-5"><uni-data-checkbox bind:input="__e" vue-id="{{('133a9744-15')+','+('133a9744-14')}}" mode="tag" localdata="{{[{text:'开启',value:1},{text:'关闭',value:0}]}}" value="{{formData.Always}}" data-event-opts="{{[['^input',[['__set_model',['$0','Always','$event',[]],['formData']]]]]}}" bind:__l="__l"></uni-data-checkbox></view></uni-section></uni-forms-item><uni-forms-item vue-id="{{('133a9744-16')+','+('133a9744-2')}}" label="启用收集" name="EnableCollect" required="{{true}}" bind:__l="__l" vue-slots="{{['default']}}"><uni-section vue-id="{{('133a9744-17')+','+('133a9744-16')}}" type="line" bind:__l="__l" vue-slots="{{['default']}}"><view class="uni-px-5"><uni-data-checkbox bind:input="__e" vue-id="{{('133a9744-18')+','+('133a9744-17')}}" mode="tag" localdata="{{[{text:'开启',value:1},{text:'关闭',value:0}]}}" value="{{formData.EnableCollect}}" data-event-opts="{{[['^input',[['__set_model',['$0','EnableCollect','$event',[]],['formData']]]]]}}" bind:__l="__l"></uni-data-checkbox></view></uni-section></uni-forms-item><uni-forms-item vue-id="{{('133a9744-19')+','+('133a9744-2')}}" label="回复模板" bind:__l="__l" vue-slots="{{['default']}}"><button class="mini-btn" style="background:#2979ff;" type="primary" size="mini" data-event-opts="{{[['tap',[['template',[0]]]]]}}" bindtap="__e">配置话术</button></uni-forms-item><uni-forms-item vue-id="{{('133a9744-20')+','+('133a9744-2')}}" label="多次添加回复模板" bind:__l="__l" vue-slots="{{['default']}}"><button class="mini-btn" style="background:#2979ff;" type="primary" size="mini" data-event-opts="{{[['tap',[['template',[1]]]]]}}" bindtap="__e">配置话术</button></uni-forms-item><button data-event-opts="{{[['tap',[['submit',['$event']]]]]}}" class="submit" style="background:#2979ff;color:#fff;" bindtap="__e">保存</button></uni-forms></view><block wx:if="{{showTemplate}}"><view class="showTemplate"><scroll-view style="height:100%;" scroll-y="true"><view style="padding:0 30rpx;box-sizing:border-box;padding-bottom:260rpx;"><block wx:for="{{templateData}}" wx:for-item="item" wx:for-index="index"><view class="templateBox"><input data-event-opts="{{[['input',[['__set_model',['$0','Id','$event',[]],[[['templateData','',index]]]]]]]}}" style="display:none;" value="{{item.Id}}" bindinput="__e"/><input data-event-opts="{{[['input',[['__set_model',['$0','WechatFriendRequestTaskId','$event',[]],[[['templateData','',index]]]]]]]}}" style="display:none;" value="{{item.WechatFriendRequestTaskId}}" bindinput="__e"/><input data-event-opts="{{[['input',[['__set_model',['$0','mode','$event',[]],[[['templateData','',index]]]]]]]}}" style="display:none;" value="{{item.mode}}" bindinput="__e"/><uni-forms class="vue-ref-in-for" vue-id="{{'133a9744-21-'+index}}" modelValue="{{item}}" label-position="top" label-width="200px" data-ref="form" bind:__l="__l" vue-slots="{{['default']}}"><uni-forms-item vue-id="{{('133a9744-22-'+index)+','+('133a9744-21-'+index)}}" label="消息类型" bind:__l="__l" vue-slots="{{['default']}}"><uni-section vue-id="{{('133a9744-23-'+index)+','+('133a9744-22-'+index)}}" type="line" bind:__l="__l" vue-slots="{{['default']}}"><view class="uni-px-5"><uni-data-checkbox bind:input="__e" vue-id="{{('133a9744-24-'+index)+','+('133a9744-23-'+index)}}" mode="tag" localdata="{{[{text:'文本',value:1},{text:'图片',value:3},{text:'视频',value:43}]}}" value="{{item.MsgType}}" data-event-opts="{{[['^input',[['__set_model',['$0','MsgType','$event',[]],[[['templateData','',index]]]]]]]}}" bind:__l="__l"></uni-data-checkbox></view></uni-section></uni-forms-item><uni-forms-item vue-id="{{('133a9744-25-'+index)+','+('133a9744-21-'+index)}}" label="内容" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{item.MsgType==1}}"><block><uni-easyinput bind:input="__e" vue-id="{{('133a9744-26-'+index)+','+('133a9744-25-'+index)}}" type="textarea" placeholder="请输入内容" value="{{item.Content}}" data-event-opts="{{[['^input',[['__set_model',['$0','Content','$event',[]],[[['templateData','',index]]]]]]]}}" bind:__l="__l"></uni-easyinput></block></block><block wx:else><block wx:if="{{item.MsgType==3||item.MsgType==43}}"><block><input data-event-opts="{{[['input',[['__set_model',['$0','Content','$event',[]],[[['templateData','',index]]]]]]]}}" style="display:none;" value="{{item.Content}}" bindinput="__e"/><block wx:if="{{item.MsgType==3}}"><block><block wx:if="{{item.ImageUrl}}"><view><image style="width:300rpx;" src="{{item.ImageUrl}}" mode="widthFix"></image></view></block><button class="mini-btn" style="background:#2979ff;" type="primary" size="mini" data-event-opts="{{[['tap',[['uploadImg',[index]]]]]}}" bindtap="__e">上传图片</button></block></block><block wx:else><block wx:if="{{item.MsgType==43}}"><block><block wx:if="{{item.VideoUrl}}"><view><video style="width:300rpx;" src="{{item.VideoUrl}}"></video></view></block><button class="mini-btn" style="background:#2979ff;" type="primary" size="mini" data-event-opts="{{[['tap',[['uploadVideo',[index]]]]]}}" bindtap="__e">上传视频</button></block></block></block></block></block></block></uni-forms-item><uni-forms-item vue-id="{{('133a9744-27-'+index)+','+('133a9744-21-'+index)}}" label="间隔时间(秒)" bind:__l="__l" vue-slots="{{['default']}}"><uni-easyinput bind:input="__e" vue-id="{{('133a9744-28-'+index)+','+('133a9744-27-'+index)}}" type="number" placeholder="请输入时间" value="{{item.Interval}}" data-event-opts="{{[['^input',[['__set_model',['$0','Interval','$event',[]],[[['templateData','',index]]]]]]]}}" bind:__l="__l"></uni-easyinput></uni-forms-item><view class="btn2"><button data-event-opts="{{[['tap',[['saveTemplate',['$0',index],[[['templateData','',index]]]]]]]}}" class="addBtn" style="background:#2979ff;color:#fff;border-radius:0;" catchtap="__e">保存</button><button data-event-opts="{{[['tap',[['delTemplate',['$0',index],[[['templateData','',index]]]]]]]}}" class="closeBtn" style="background:red;color:#fff;border-radius:0;" catchtap="__e">删除</button></view></uni-forms></view></block><view class="btn"><button data-event-opts="{{[['tap',[['addTemplate',['$event']]]]]}}" class="addBtn" style="background:#2979ff;color:#fff;border-radius:0;" catchtap="__e">新增</button><button data-event-opts="{{[['tap',[['hideTemplate',['$event']]]]]}}" class="closeBtn" style="background:red;color:#fff;border-radius:0;" catchtap="__e">关闭</button></view></view></scroll-view></view></block></view>